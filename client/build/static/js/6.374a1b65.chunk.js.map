{"version":3,"sources":["containers/Login/Login.scss","containers/Login/Login.js"],"names":["module","exports","lightColor","darkColor","cardColor","blanc","rouge","vert","noir","gris","violet","focus","grisFonce","noirCD","blancSimple","jauneClair","attention","validation","validationHover","error","erreur","uiattention","standby","orange","Login","_Component","_getPrototypeOf2","_this","Object","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_len","arguments","length","args","Array","_key","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","apply","concat","state","username","password","cpassword","code","email","phone","authy_id","traducteur","passwordVisible","redirectTo","step","userExists","usernameHidden","showModal","cannyRedirect","togglePasswordVisibility","setState","pS","toggleModal","goBack","resetPassword","API","reset_password","then","data","Swal","fire","title","text","type","send","e","preventDefault","timer","checkUserExists","status","passwdCheck","score","user","login","token","_this$state","window","location","assign","indexOf","props","history","push","localStorage","setItem","setAuthToken","fetchUser","catch","response","_","get","console","log","handleChange","event","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","id","value","upcoming","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","key","locState","qParam","querySearch","search","redirect","isAuth","decodeURIComponent","getItem","scrollTo","_this$state2","t","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","RegisterHeader","reactstrap__WEBPACK_IMPORTED_MODULE_8__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","onSubmit","react_transition_group__WEBPACK_IMPORTED_MODULE_17__","in","appear","timeout","classNames","UsernameField","onChange","Fragment","PasswordField","placeholder","onClick","CodeField","PasswordFooter","react_router_dom__WEBPACK_IMPORTED_MODULE_16__","to","_components_FigmaUI_FButton_FButton__WEBPACK_IMPORTED_MODULE_25__","name","InfoModal","show","toggle","Component","_components_FigmaUI_FInput_FInput__WEBPACK_IMPORTED_MODULE_27__","prepend","prependName","autoComplete","color","disabled","password_check","append","autoFocus","appendName","inputClassName","onAppendClick","reactstrap__WEBPACK_IMPORTED_MODULE_11__","colorAvancement","reactstrap__WEBPACK_IMPORTED_MODULE_12__","_components_UI_EVAIcon_EVAIcon__WEBPACK_IMPORTED_MODULE_26__","fill","variables","_components_Modals_Modal__WEBPACK_IMPORTED_MODULE_29__","modalHeader","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","mapDispatchToProps","fetchUserActionCreator","track","page","dispatchOnMount","connect","withTranslation"],"mappings":"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","file":"static/js/6.374a1b65.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"lightColor\":\"#F2F2F2\",\"darkColor\":\"#212121\",\"cardColor\":\"#828282\",\"blanc\":\"#FBFBFB\",\"rouge\":\"#E55039\",\"vert\":\"#2CA12A\",\"noir\":\"#212121\",\"gris\":\"#F2F2F2\",\"violet\":\"#583F93\",\"focus\":\"#2D9CDB\",\"grisFonce\":\"#828282\",\"noirCD\":\"#CDCDCD\",\"blancSimple\":\"#FFFFFF\",\"jauneClair\":\"#FFF7AE\",\"attention\":\"#F9EF99\",\"validation\":\"#DEF6C2\",\"validationHover\":\"#4CAF50\",\"error\":\"#F44336\",\"erreur\":\"#FFCECB\",\"uiattention\":\"#FFEB3B\",\"standby\":\"#FDD497\",\"orange\":\"#FF9800\"};","import React, { Component } from \"react\";\nimport track from \"react-tracking\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  Form,\n  ModalBody,\n  ModalFooter,\n  Progress,\n} from \"reactstrap\";\nimport Swal from \"sweetalert2\";\nimport { NavLink } from \"react-router-dom\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { connect } from \"react-redux\";\nimport { withTranslation } from \"react-i18next\";\nimport _ from \"lodash\";\nimport passwdCheck from \"zxcvbn\";\nimport querySearch from \"stringquery\";\n\nimport API from \"../../utils/API\";\nimport setAuthToken from \"../../utils/setAuthToken\";\n// import FCBtn from '../../assets/FCboutons-10.png';\nimport FButton from \"../../components/FigmaUI/FButton/FButton\";\nimport EVAIcon from \"../../components/UI/EVAIcon/EVAIcon\";\nimport FInput from \"../../components/FigmaUI/FInput/FInput\";\nimport { fetchUserActionCreator } from \"../../services/User/user.actions\";\nimport Modal from \"../../components/Modals/Modal\";\nimport { colorAvancement } from \"../../components/Functions/ColorFunctions\";\n\nimport \"./Login.scss\";\nimport variables from \"scss/colors.scss\";\n\nexport class Login extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    cpassword: \"\",\n    code: \"\",\n    email: \"\",\n    phone: \"\",\n    authy_id: \"\",\n    traducteur: false,\n    passwordVisible: false,\n    redirectTo: \"/\",\n    step: 0,\n    userExists: false,\n    usernameHidden: false,\n    showModal: false,\n    cannyRedirect: false,\n  };\n\n  componentDidMount() {\n    const locState = this.props.location.state;\n    const qParam = querySearch(this.props.location.search).redirect;\n    if (API.isAuth()) {\n      if (qParam) {\n        const redirectTo = decodeURIComponent(qParam);\n        return window.location.assign(\n          redirectTo +\n            (redirectTo.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\n            \"ssoToken=\" +\n            localStorage.getItem(\"token\")\n        );\n      } else {\n        return this.props.history.push(\"/\");\n      }\n    }\n    if (locState) {\n      this.setState({\n        traducteur: locState.traducteur,\n        redirectTo: locState.redirectTo || \"/\",\n      });\n    }\n    if (qParam) {\n      this.setState({\n        cannyRedirect: true,\n        redirectTo: decodeURIComponent(qParam),\n      });\n    }\n    window.scrollTo(0, 0);\n  }\n\n  togglePasswordVisibility = () =>\n    this.setState((pS) => ({ passwordVisible: !pS.passwordVisible }));\n  toggleModal = () => this.setState((pS) => ({ showModal: !pS.showModal }));\n\n  goBack = () =>\n    this.setState({ step: 0, userExists: false, password: \"\", cpassword: \"\" });\n\n  resetPassword = () => {\n    API.reset_password({ username: this.state.username }).then((data) => {\n      Swal.fire({\n        title: \"Yay...\",\n        text:\n          \"Le mot de passe de récupération a été envoyé à l'adresse mail renseignée lors de la création du compte\",\n        type: \"success\",\n      });\n    });\n  };\n\n  send = (e) => {\n    e.preventDefault();\n    if (this.state.step === 0) {\n      if (this.state.username.length === 0) {\n        Swal.fire({\n          title: \"Oops...\",\n          text: \"Aucun nom d'utilisateur n'est renseigné !\",\n          type: \"error\",\n          timer: 1500,\n        });\n        return;\n      }\n      API.checkUserExists({ username: this.state.username }).then((data) => {\n        this.setState({ userExists: data.status === 200, step: 1 });\n      });\n    } else {\n      if (this.state.password.length === 0) {\n        return Swal.fire({\n          title: \"Oops...\",\n          text: \"Aucun mot de passe n'est renseigné !\",\n          type: \"error\",\n          timer: 1500,\n        });\n      }\n      if (\n        !this.state.userExists &&\n        this.state.password !== this.state.cpassword\n      ) {\n        return Swal.fire({\n          title: \"Oops...\",\n          text: \"Les mots de passes ne correspondent pas !\",\n          type: \"error\",\n          timer: 1500,\n        });\n      }\n      if (\n        !this.state.userExists &&\n        (passwdCheck(this.state.password) || {}).score < 1\n      ) {\n        return Swal.fire({\n          title: \"Oops...\",\n          text: \"Le mot de passe est trop faible\",\n          type: \"error\",\n          timer: 1500,\n        });\n      }\n      const user = {\n        username: this.state.username,\n        password: this.state.password,\n        cpassword: this.state.cpassword,\n        traducteur: this.state.traducteur,\n        code: this.state.code,\n        email: this.state.email,\n        phone: this.state.phone,\n      };\n      API.login(user)\n        .then((data) => {\n          const token = data.data.token,\n            { cannyRedirect, redirectTo } = this.state;\n          Swal.fire({\n            title: \"Yay...\",\n            text: \"Authentification réussie !\",\n            type: \"success\",\n            timer: 1500,\n          }).then(() => {\n            if (cannyRedirect) {\n              return window.location.assign(\n                redirectTo +\n                  (redirectTo.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\n                  \"ssoToken=\" +\n                  token\n              );\n            } else {\n              return this.props.history.push(redirectTo);\n            }\n          });\n          localStorage.setItem(\"token\", token);\n          if (!cannyRedirect) {\n            setAuthToken(token);\n            this.props.fetchUser();\n          }\n        })\n        .catch((e) => {\n          if (e.response.status === 501) {\n            this.setState({ showModal: false, step: 2 });\n          } else if (e.response.status === 502) {\n            this.setState({\n              showModal: true,\n              phone: _.get(e, \"response.data.phone\", \"\"),\n              email: _.get(e, \"response.data.email\", \"\"),\n            });\n          } else {\n            console.log(e.response);\n          }\n        });\n    }\n  };\n\n  handleChange = (event) =>\n    this.setState({ [event.target.id]: event.target.value });\n\n  upcoming = () =>\n    Swal.fire({\n      title: \"Oh non!\",\n      text: \"Cette fonctionnalité n'est pas encore disponible\",\n      type: \"error\",\n      timer: 1500,\n    });\n\n  render() {\n    const {\n      passwordVisible,\n      username,\n      step,\n      userExists,\n      code,\n      showModal,\n      email,\n      phone,\n    } = this.state;\n    const { t } = this.props;\n    return (\n      <div className=\"app flex-row align-items-center login\">\n        <div className=\"login-wrapper\">\n          {step === 1 && !userExists && (\n            <RegisterHeader goBack={this.goBack} t={t} />\n          )}\n          <Card className=\"card-login main-card\">\n            <CardBody>\n              <Form onSubmit={this.send}>\n                <h5>\n                  {step === 0 || userExists\n                    ? t(\"Login.Se connecter\", \"Se connecter\")\n                    : step === 1\n                    ? t(\"Login.Se créer un compte\", \"Se créer un compte\")\n                    : \"Votre code de confirmation\"}\n                </h5>\n                <div className=\"texte-small mb-12\">\n                  {step === 0\n                    ? t(\"Login.Ou se créer un compte\", \"Ou se créer un compte\")\n                    : userExists && step === 1\n                    ? t(\n                        \"Login.Content de vous revoir !\",\n                        \"Content de vous revoir !\"\n                      )\n                    : step === 1\n                    ? t(\"Login.Pas besoin d’email\", \"Pas besoin d’email\")\n                    : \"Nous vous avons envoyé un SMS à votre numéro\"}\n                </div>\n                <CSSTransition\n                  in={true}\n                  appear={true}\n                  timeout={600}\n                  classNames=\"example\"\n                >\n                  {step === 0 ? (\n                    <UsernameField\n                      value={username}\n                      onChange={this.handleChange}\n                      step={step}\n                      key=\"username-field\"\n                      t={t}\n                    />\n                  ) : step === 1 ? (\n                    <>\n                      <PasswordField\n                        id=\"password\"\n                        placeholder=\"Mot de passe\"\n                        value={this.state.password}\n                        onChange={this.handleChange}\n                        passwordVisible={passwordVisible}\n                        onClick={this.togglePasswordVisibility}\n                        userExists={userExists}\n                        t={t}\n                      />\n                      {step === 1 && !userExists && (\n                        <PasswordField\n                          id=\"cpassword\"\n                          placeholder=\"Confirmez le mot de passe\"\n                          value={this.state.cpassword}\n                          onChange={this.handleChange}\n                          passwordVisible={passwordVisible}\n                          onClick={this.togglePasswordVisibility}\n                          t={t}\n                        />\n                      )}\n                    </>\n                  ) : (\n                    <CodeField\n                      value={code}\n                      onChange={this.handleChange}\n                      key=\"code-field\"\n                    />\n                  )}\n                </CSSTransition>\n\n                {step === 1 && (\n                  <PasswordFooter\n                    value={this.state.password}\n                    upcoming={this.upcoming}\n                    t={t}\n                    userExists={userExists}\n                    resetPassword={this.resetPassword}\n                  />\n                )}\n              </Form>\n            </CardBody>\n          </Card>\n          {/* <Card className=\"card-login\">\n            <CardBody>\n              <div className=\"alt-login\">\n                <form action=\"/user/FClogin\" method=\"post\">\n                  <div className=\"field\">\n                    <label className=\"label\">\n                        Niveau eIDAS\n                        <span\n                          className=\"has-text-info tooltip is-tooltip-multiline\"\n                          data-tooltip=\"Vous pouvez dès à présent tester les identités de niveau faible (eidas1), substantiel (eidas2) et fort (eidas3) sur l'environnement de qualification. En production, vous n'aurez cependant accès pour l'instant qu'à des identités de niveau faible (eidas1).\" >\n                            (info)\n                        </span>\n                    </label>\n                    <div className=\"select\">\n                      <select name=\"eidasLevel\">\n                        <option value=\"eidas1\">Défaut : Faible (eidas1)</option>\n                        <option value=\"eidas2\">Substantiel (eidas2)</option>\n                        <option value=\"eidas3\">Fort (eidas3)</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"field\">\n                    <input type=\"image\" src={FCBtn} alt=\"Soumettre\"/>\n                  </div>\n                </form>\n              </div>\n            </CardBody>\n          </Card> */}\n          <NavLink to=\"/\">\n            <FButton\n              type=\"outline\"\n              name=\"corner-up-left-outline\"\n              className=\"retour-btn\"\n            >\n              {t(\"Login.Retour à l'accueil\", \"Retour à l'accueil\")}\n            </FButton>\n          </NavLink>\n        </div>\n\n        <InfoModal\n          show={showModal}\n          email={email}\n          phone={phone}\n          toggle={this.toggleModal}\n          send={this.send}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nconst UsernameField = (props) => (\n  <div key=\"username-field\">\n    <FInput\n      prepend\n      prependName=\"person-outline\"\n      {...props}\n      id=\"username\"\n      type=\"username\"\n      placeholder={props.t(\"Login.Pseudonyme\", \"Pseudonyme\")}\n      autoComplete=\"username\"\n    />\n    <div className=\"footer-buttons\">\n      <FButton\n        type=\"dark\"\n        name=\"arrow-forward-outline\"\n        color=\"dark\"\n        className=\"connect-btn\"\n        disabled={!props.value}\n      >\n        {props.t(\"Suivant\", \"Suivant\")}\n      </FButton>\n    </div>\n  </div>\n);\n\nconst PasswordField = (props) => {\n  const password_check = passwdCheck(props.value);\n  return (\n    <>\n      <FInput\n        prepend\n        append\n        autoFocus={props.id === \"password\"}\n        prependName=\"lock-outline\"\n        appendName={props.passwordVisible ? \"eye-off-2-outline\" : \"eye-outline\"}\n        inputClassName=\"password-input\"\n        onAppendClick={props.onClick}\n        {...props}\n        type={props.passwordVisible ? \"text\" : \"password\"}\n        id={props.id}\n        placeholder={\n          props.placeholder &&\n          props.t(\"Login.\" + props.placeholder, props.placeholder)\n        }\n        autoComplete=\"new-password\"\n      />\n      {props.id === \"password\" && !props.userExists && props.value && (\n        <div className=\"score-wrapper mb-10\">\n          <span className=\"mr-10\">{props.t(\"Login.Force\", \"Force\")} :</span>\n          <Progress\n            color={colorAvancement(password_check.score / 4)}\n            value={((0.1 + password_check.score / 4) * 100) / 1.1}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nconst PasswordFooter = (props) => (\n  <div className=\"footer-buttons\">\n    {props.userExists && (\n      <Button\n        type=\"button\"\n        color=\"transparent\"\n        className=\"mr-10 password-btn\"\n        onClick={props.resetPassword}\n      >\n        <u>{props.t(\"Login.Mot de passe oublié ?\", \"Mot de passe oublié ?\")}</u>\n      </Button>\n    )}\n    <FButton\n      type=\"dark\"\n      name=\"log-in\"\n      color=\"dark\"\n      className=\"connect-btn\"\n      disabled={!props.value}\n    >\n      {props.t(\"Connexion\", \"Connexion\")}\n    </FButton>\n  </div>\n);\n\nconst RegisterHeader = (props) => (\n  <Card\n    className=\"card-login header-card cursor-pointer\"\n    onClick={props.goBack}\n  >\n    <CardBody>\n      <EVAIcon\n        name=\"corner-up-left-outline\"\n        fill={variables.noir}\n        className=\"mr-20\"\n      />\n      <span>\n        {props.t(\"Login.no-account\", \"Il n'existe pas de compte à ce nom\")}.{\" \"}\n      </span>\n    </CardBody>\n  </Card>\n);\n\nconst CodeField = (props) => (\n  <div key=\"code-field\">\n    <FInput\n      prepend\n      prependName=\"lock-outline\"\n      {...props}\n      id=\"code\"\n      type=\"number\"\n      placeholder=\"code\"\n    />\n    <div className=\"footer-buttons\">\n      <FButton\n        type=\"dark\"\n        name=\"arrow-forward-outline\"\n        color=\"dark\"\n        className=\"connect-btn\"\n        disabled={!props.value}\n      >\n        Valider\n      </FButton>\n    </div>\n  </div>\n);\n\nconst InfoModal = (props) => (\n  <Modal\n    className=\"info-modal\"\n    modalHeader=\"Vos informations de compte\"\n    {...props}\n  >\n    <ModalBody>\n      <FInput\n        prepend\n        prependName=\"at-outline\"\n        value={props.email}\n        {...props}\n        id=\"email\"\n        type=\"email\"\n        placeholder=\"Email\"\n      />\n      <FInput\n        prepend\n        prependName=\"phone-call-outline\"\n        value={props.phone}\n        {...props}\n        id=\"phone\"\n        type=\"phone\"\n        placeholder=\"Téléphone : 06 11 22 33 44\"\n      />\n    </ModalBody>\n    <ModalFooter>\n      <FButton type=\"light-action\" onClick={props.toggle} className=\"mr-10\">\n        Annuler\n      </FButton>\n      <FButton type=\"validate\" name=\"checkmark\" onClick={props.send}>\n        Valider\n      </FButton>\n    </ModalFooter>\n  </Modal>\n);\n\nconst mapDispatchToProps = { fetchUser: fetchUserActionCreator };\n\nexport default track(\n  {\n    page: \"Login\",\n  },\n  { dispatchOnMount: true }\n)(connect(null, mapDispatchToProps)(withTranslation()(Login)));\n"],"sourceRoot":""}